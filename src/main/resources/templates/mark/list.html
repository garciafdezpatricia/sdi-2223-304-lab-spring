<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://thymeleaf.org">
<head th:replace="fragments/head"></head>
<body>
<nav th:replace="fragments/nav"></nav>
<div class="container" id="main-container">
  <h2 th:text="#{markHeader.message}"></h2>

  <p>Notas consultadas recientemente por el usuario:</p>
  <div class="table-responsive">
    <table class="table table-hover" th:fragment="tableMarks" id="consultedTableMarks">
      <thead>
      <tr>
        <th scope="col">id</th>
        <th scope="col">Descripción</th>
        <th scope="col">Puntuación</th>
        <th scope="col"></th>
        <th scope="col"></th>
        <th scope="col"></th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="mark : ${consultedList}">
        <td th:text="${mark.id}"> 1</td>
        <td th:text="${mark.description}"> Ejercicio 1</td>
        <td th:text="${mark.score}">10</td>
        <td><a th:href="${'/mark/details/' + mark.id}">detalles</a></td>
        <td><a th:href="${'/mark/edit/' + mark.id}">modificar</a></td>
        <td><a th:href="${'/mark/delete/' + mark.id}">eliminar</a></td>
      </tr>
      </tbody>
    </table>
  </div>


  <p th:text="#{markInfo.message}"></p>
  <button type="button" id="updateButton" class="btn btn-primary" th:text="#{update.message}"></button>
  <script> // cuando el usuario clique en el elemento que tenga como id 'updatebutton' se ejecuta function()
    $("#updateButton").click(function(){ //llama a load que carga en el componenete con id tableMarks la URL que se le pasa.
      $("#tableMarks").load('/mark/list/update');
    });
  </script>
  <div class="table-responsive">
    <table class="table table-hover" th:fragment="tableMarks" id="tableMarks"> <!-- decimos que esta tabla es un fragmento -->
      <thead>
      <tr>
        <th scope="col" th:text="#{id.message}"></th>
        <th scope="col" th:text="#{description.message}"></th>
        <th scope="col" th:text="#{score.message}"></th>
        <th scope="col"></th>
        <th scope="col"></th>
        <th scope="col"></th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="mark : ${markList}">
        <td scope="row" th:text="${mark.id}"> 1</td>
        <td th:text="${mark.description}"> Ejercicio 1</td>
        <td th:text="${mark.score}">10</td>
        <td><a th:href="${'/mark/details/' + mark.id}" th:text="#{details.message}"></a></td>
        <td><a th:href="${'/mark/edit/' + mark.id}" th:text="#{edit.message}"></a></td>
        <td><a th:href="${'/mark/delete/' + mark.id}" th:text="#{delete.message}"></a></td>
      </tr>
      </tbody>
    </table>
  </div>
  <div th:if="${#lists.isEmpty(markList)}" th:text="#{noMarks.message}"></div>
</div>
<footer th:replace="fragments/footer"></footer>
</body>
</html>
